{"version":3,"sources":["apis/streams.js","history.js","actions/types.js","actions/index.js","components/streams/StreamList.js","components/streams/StreamForm.js","components/streams/StreamCreate.js","components/streams/StreamEdit.js","components/Modal.js","components/streams/StreamDelete.js","components/streams/StreamShow.js","components/GoogleAuth.js","components/Header.js","components/App.js","reducers/authReducer.js","reducers/index.js","reducers/streamReducer.js","index.js"],"names":["axios","create","baseURL","createBrowserHistory","SIGN_IN","SIGN_OUT","CREATE_STREAM","DELETE_STREAM","EDIT_STREAM","FETCH_STREAM","FETCH_STREAMS","fetchStream","id","dispatch","a","streams","get","response","type","payload","data","StreamList","adminEl","stream","props","currentUserId","userId","className","to","this","fetchStreams","map","title","description","isSignedIn","style","textAlign","streamListEL","createStreamEl","Component","connect","state","auth","Object","values","StreamForm","inputEl","input","label","meta","touched","error","autoComplete","errorEl","onSubmit","formValues","handleSubmit","Field","name","component","reduxForm","form","validate","errors","StreamCreate","createStream","getState","post","history","push","StreamEdit","editStream","match","params","initialValues","_","pick","ownProps","patch","Modal","ReactDOM","createPortal","onClick","onDismiss","e","stopPropagation","content","actions","document","getElementById","StreamDelete","onDelete","deleteStream","Fragment","contentText","delete","StreamShow","videoRef","React","createRef","buildPlayer","player","destroy","flv","createPlayer","url","attachMediaElement","current","load","ref","width","controls","GoogleAuth","onAuthChange","signIn","currentUser","getId","signOut","window","gapi","client","init","clientId","scope","then","auth2","getAuthInstance","listen","err","console","log","AuthButtonEl","Header","App","path","exact","INITIAL_STATE","combineReducers","action","formReducer","omit","mapKeys","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","render"],"mappings":"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","file":"static/js/main.1e459ebb.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nexport default axios.create({\r\n  baseURL: 'https://streamy-rest-api.herokuapp.com',\r\n});\r\n","import { createBrowserHistory } from 'history';\r\n\r\nexport default createBrowserHistory();\r\n","export const SIGN_IN = 'SIGN_IN';\r\nexport const SIGN_OUT = 'SIGN_OUT';\r\nexport const CREATE_STREAM = 'CREATE_STREAM';\r\nexport const DELETE_STREAM = 'DELETE_STREAM';\r\nexport const EDIT_STREAM = 'EDIT_STREAM';\r\nexport const FETCH_STREAM = 'FETCH_STREAM';\r\nexport const FETCH_STREAMS = 'FETCH_STREAMS';\r\n","import streams from '../apis/streams';\r\nimport history from '../history';\r\nimport {\r\n  SIGN_IN,\r\n  SIGN_OUT,\r\n  CREATE_STREAM,\r\n  FETCH_STREAM,\r\n  FETCH_STREAMS,\r\n  EDIT_STREAM,\r\n  DELETE_STREAM,\r\n} from './types';\r\n\r\nexport const signIn = userId => {\r\n  return {\r\n    type: SIGN_IN,\r\n    payload: userId,\r\n  };\r\n};\r\n\r\nexport const signOut = () => {\r\n  return {\r\n    type: SIGN_OUT,\r\n  };\r\n};\r\n\r\nexport const fetchStream = id => async dispatch => {\r\n  const response = await streams.get(`/streams/${id}`);\r\n  dispatch({\r\n    type: FETCH_STREAM,\r\n    payload: response.data,\r\n  });\r\n};\r\n\r\nexport const createStream = formValues => async (dispatch, getState) => {\r\n  const { userId } = getState().auth;\r\n  const response = await streams.post('/streams', { ...formValues, userId });\r\n  dispatch({\r\n    type: CREATE_STREAM,\r\n    payload: response.data,\r\n  });\r\n  history.push('/');\r\n};\r\n\r\nexport const deleteStream = id => async dispatch => {\r\n  await streams.delete(`/streams/${id}`);\r\n  dispatch({\r\n    type: DELETE_STREAM,\r\n    payload: id,\r\n  });\r\n  history.push('/');\r\n};\r\n\r\nexport const editStream = (id, formValues) => async dispatch => {\r\n  const response = await streams.patch(`/streams/${id}`, formValues);\r\n  dispatch({\r\n    type: EDIT_STREAM,\r\n    payload: response.data,\r\n  });\r\n  history.push('/');\r\n};\r\n\r\nexport const fetchStreams = () => async dispatch => {\r\n  const response = await streams.get('/streams');\r\n  dispatch({\r\n    type: FETCH_STREAMS,\r\n    payload: response.data,\r\n  });\r\n};\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { fetchStreams } from '../../actions';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass StreamList extends Component {\r\n  componentDidMount() {\r\n    this.props.fetchStreams();\r\n  }\r\n\r\n  adminEl = stream => {\r\n    if (this.props.currentUserId === stream.userId) {\r\n      return (\r\n        <div className='right floated content'>\r\n          <Link to={`/streams/edit/${stream.id}`} className='ui button primary'>\r\n            Edit\r\n          </Link>\r\n          <Link\r\n            to={`/streams/delete/${stream.id}`}\r\n            className='ui button negative'\r\n          >\r\n            Delete\r\n          </Link>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  streamListEL() {\r\n    return this.props.streams.map(stream => {\r\n      return (\r\n        <div className='item' key={stream.id}>\r\n          {this.adminEl(stream)}\r\n          <i className='large middle aligned icon camera' />\r\n          <div className='content'>\r\n            <Link to={`/streams/${stream.id}`} className='header'>\r\n              {stream.title}\r\n            </Link>\r\n            <div className='description'>{stream.description}</div>\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  createStreamEl() {\r\n    if (this.props.isSignedIn) {\r\n      return (\r\n        <div style={{ textAlign: 'right' }}>\r\n          <Link to='/streams/new' className='ui button primary'>\r\n            Create Stream\r\n          </Link>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Stream List</h2>\r\n        <div className='ui celled list'>{this.streamListEL()}</div>\r\n        {this.createStreamEl()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    currentUserId: state.auth.userId,\r\n    isSignedIn: state.auth.isSignedIn,\r\n    streams: Object.values(state.streams),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchStreams })(StreamList);\r\n","import React, { Component } from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\n\r\nclass StreamForm extends Component {\r\n  errorEl({ touched, error }) {\r\n    if (touched && error) {\r\n      return (\r\n        <div className='ui error message'>\r\n          <div className='header'>{error}</div>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  inputEl = ({ input, label, meta }) => {\r\n    const className = `field ${meta.touched && meta.error ? 'error' : null}`;\r\n    return (\r\n      <div className={className}>\r\n        <label>{label}</label>\r\n        <input {...input} autoComplete='off' />\r\n        {this.errorEl(meta)}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  onSubmit = formValues => {\r\n    this.props.onSubmit(formValues);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form\r\n        onSubmit={this.props.handleSubmit(this.onSubmit)}\r\n        className='ui form error'\r\n      >\r\n        <Field name='title' component={this.inputEl} label='Enter Title' />\r\n        <Field\r\n          name='description'\r\n          component={this.inputEl}\r\n          label='Enter Description'\r\n        />\r\n        <button className='ui button primary'>Submit</button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nconst validate = formValues => {\r\n  const errors = {};\r\n  if (!formValues.title) {\r\n    errors.title = 'You must enter a title';\r\n  }\r\n  if (!formValues.description) {\r\n    errors.description = 'You must enter a description';\r\n  }\r\n  return errors;\r\n};\r\n\r\nexport default reduxForm({ form: 'streamForm', validate })(StreamForm);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createStream } from '../../actions';\r\nimport StreamForm from './StreamForm';\r\n\r\nclass StreamCreate extends Component {\r\n  onSubmit = formValues => {\r\n    this.props.createStream(formValues);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3>Create a Stream</h3>\r\n        <StreamForm onSubmit={this.onSubmit} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(null, { createStream })(StreamCreate);\r\n","import _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { fetchStream, editStream } from '../../actions';\r\nimport StreamForm from './StreamForm';\r\n\r\nclass StreamEdit extends Component {\r\n  componentDidMount() {\r\n    this.props.fetchStream(this.props.match.params.id);\r\n  }\r\n\r\n  onSubmit = formValues => {\r\n    this.props.editStream(this.props.match.params.id, formValues);\r\n  };\r\n\r\n  render() {\r\n    if (!this.props.stream) {\r\n      return <div>Loading..</div>;\r\n    }\r\n    return (\r\n      <div>\r\n        <h3>Edit Stream</h3>\r\n        <StreamForm\r\n          initialValues={_.pick(this.props.stream, 'title', 'description')}\r\n          onSubmit={this.onSubmit}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return {\r\n    stream: state.streams[ownProps.match.params.id],\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchStream, editStream })(\r\n  StreamEdit\r\n);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst Modal = props => {\r\n  return ReactDOM.createPortal(\r\n    <div onClick={props.onDismiss} className='ui dimmer modals visible active'>\r\n      <div\r\n        onClick={e => e.stopPropagation()}\r\n        className='ui standart modal visible active'\r\n      >\r\n        <div className='header'>{props.title}</div>\r\n        <div className='content'>{props.content}</div>\r\n        <div className='actions'>{props.actions}</div>\r\n      </div>\r\n    </div>,\r\n    document.getElementById('modal')\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\nimport Modal from '../Modal';\r\nimport history from '../../history';\r\nimport { fetchStream, deleteStream } from '../../actions';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass StreamDelete extends Component {\r\n  componentDidMount() {\r\n    this.props.fetchStream(this.props.match.params.id);\r\n  }\r\n\r\n  onDelete = () => {\r\n    this.props.deleteStream(this.props.match.params.id);\r\n  };\r\n\r\n  actions() {\r\n    return (\r\n      <React.Fragment>\r\n        <button onClick={this.onDelete} className='ui button negative'>\r\n          Delete\r\n        </button>\r\n        <Link to={'/'} className='ui button'>\r\n          Cancel\r\n        </Link>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  contentText() {\r\n    if (!this.props.stream) {\r\n      return 'Are you sure you want to delete this stream';\r\n    }\r\n    return `Are you sure you want to ${this.props.stream.title}?`;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Modal\r\n        title='Delete Stream'\r\n        content={this.contentText()}\r\n        actions={this.actions()}\r\n        onDismiss={() => history.push('/')}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return {\r\n    stream: state.streams[ownProps.match.params.id],\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchStream, deleteStream })(\r\n  StreamDelete\r\n);\r\n","import React, { Component } from 'react';\r\nimport flv from 'flv.js';\r\nimport { connect } from 'react-redux';\r\nimport { fetchStream } from '../../actions';\r\n\r\nclass StreamShow extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.videoRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { id } = this.props.match.params;\r\n    this.props.fetchStream(id);\r\n    this.buildPlayer();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.buildPlayer();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.player.destroy();\r\n  }\r\n\r\n  buildPlayer() {\r\n    if (this.player || !this.props.stream) {\r\n      return;\r\n    }\r\n    const { id } = this.props.match.params;\r\n    this.player = flv.createPlayer({\r\n      type: 'flv',\r\n      url: `http://localhost:8000/live/${id}.flv`,\r\n    });\r\n    this.player.attachMediaElement(this.videoRef.current);\r\n    this.player.load();\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.stream) {\r\n      return <div>Loading..</div>;\r\n    }\r\n    const { title, description } = this.props.stream;\r\n    return (\r\n      <div>\r\n        <video ref={this.videoRef} style={{ width: '100%' }} controls />\r\n        <h1>{title}</h1>\r\n        <h5>{description}</h5>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return {\r\n    stream: state.streams[ownProps.match.params.id],\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchStream })(StreamShow);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { signIn, signOut } from '../actions';\r\n\r\nclass GoogleAuth extends Component {\r\n  componentDidMount() {\r\n    try {\r\n      window.gapi.load('client:auth2', () => {\r\n        window.gapi.client\r\n          .init({\r\n            clientId:\r\n              '1063489332108-l2ciheqvsh4atbgts2hr3g66c6ssacs9.apps.googleusercontent.com',\r\n            scope: 'email',\r\n          })\r\n          .then(() => {\r\n            this.auth = window.gapi.auth2.getAuthInstance();\r\n            this.onAuthChange(this.auth.isSignedIn.get());\r\n            this.auth.isSignedIn.listen(this.onAuthChange);\r\n          });\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  onAuthChange = isSignedIn => {\r\n    if (isSignedIn) {\r\n      this.props.signIn(this.auth.currentUser.get().getId());\r\n    } else {\r\n      this.props.signOut();\r\n    }\r\n  };\r\n\r\n  AuthButtonEl() {\r\n    if (this.props.isSignedIn === null) {\r\n      return null;\r\n    } else if (this.props.isSignedIn) {\r\n      return (\r\n        <button\r\n          className='ui red google button'\r\n          onClick={() => this.auth.signOut()}\r\n        >\r\n          <i className='google icon' />\r\n          Sign Out\r\n        </button>\r\n      );\r\n    } else {\r\n      return (\r\n        <button\r\n          className='ui red google button'\r\n          onClick={() => this.auth.signIn()}\r\n        >\r\n          <i className='google icon' />\r\n          Sign In with Google\r\n        </button>\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <div>{this.AuthButtonEl()}</div>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    isSignedIn: state.auth.isSignedIn,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { signIn, signOut })(GoogleAuth);\r\n","import React from 'react';\r\nimport GoogleAuth from './GoogleAuth';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Header = () => {\r\n  return (\r\n    <div className='ui secondary pointing menu'>\r\n      <Link to={'/'} className='item'>\r\n        Streamy\r\n      </Link>\r\n      <div className='right menu'>\r\n        <Link to={'/'} className='item'>\r\n          All Streams\r\n        </Link>\r\n        <GoogleAuth />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { Router, Route, Switch } from 'react-router-dom';\r\nimport StreamList from './streams/StreamList';\r\nimport StreamCreate from './streams/StreamCreate';\r\nimport StreamEdit from './streams/StreamEdit';\r\nimport StreamDelete from './streams/StreamDelete';\r\nimport StreamShow from './streams/StreamShow';\r\nimport Header from './Header';\r\nimport history from '../history';\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className='ui container'>\r\n      <Router history={history}>\r\n        <div>\r\n          <Header />\r\n          <Switch>\r\n            <Route path='/' exact component={StreamList} />\r\n            <Route path='/streams/new' exact component={StreamCreate} />\r\n            <Route path='/streams/edit/:id' exact component={StreamEdit} />\r\n            <Route path='/streams/delete/:id' exact component={StreamDelete} />\r\n            <Route path='/streams/:id' exact component={StreamShow} />\r\n          </Switch>\r\n        </div>\r\n      </Router>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { SIGN_IN, SIGN_OUT } from '../actions/types';\r\n\r\nconst INITIAL_STATE = {\r\n  isSignedIn: null,\r\n  userId: null,\r\n};\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case SIGN_IN:\r\n      return { ...state, isSignedIn: true, userId: action.payload };\r\n    case SIGN_OUT:\r\n      return { ...state, isSignedIn: false, userId: null };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport authReducer from './authReducer';\r\nimport streamReducer from './streamReducer';\r\nimport { reducer as formReducer } from 'redux-form';\r\n\r\nexport default combineReducers({\r\n  auth: authReducer,\r\n  form: formReducer,\r\n  streams: streamReducer,\r\n});\r\n","import _ from 'lodash';\r\nimport {\r\n  EDIT_STREAM,\r\n  FETCH_STREAM,\r\n  FETCH_STREAMS,\r\n  DELETE_STREAM,\r\n  CREATE_STREAM,\r\n} from '../actions/types';\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default (state = {}, action) => {\r\n  switch (action.type) {\r\n    case FETCH_STREAM:\r\n      return { ...state, [action.payload.id]: action.payload };\r\n    case CREATE_STREAM:\r\n      return { ...state, [action.payload.id]: action.payload };\r\n    case EDIT_STREAM:\r\n      return { ...state, [action.payload.id]: action.payload };\r\n    case DELETE_STREAM:\r\n      return _.omit(state, action.payload); // payload is id (look at the action creator)\r\n    case FETCH_STREAMS:\r\n      return { ...state, ..._.mapKeys(action.payload, 'id') };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport reducers from './reducers';\r\nimport reduxThunk from 'redux-thunk';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n  reducers,\r\n  composeEnhancers(applyMiddleware(reduxThunk))\r\n);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}